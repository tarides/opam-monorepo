<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>faq (opam-monorepo.faq)</title><link rel="stylesheet" href="../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="index.html">Up</a> – <a href="index.html">opam-monorepo</a> &#x00BB; faq</nav><header class="odoc-preamble"><h2 id="faq"><a href="#faq" class="anchor"></a>FAQ</h2></header><nav class="odoc-toc"><ul><li><a href="#is-this-for-me?">Is This For Me?</a></li><li><a href="#about-opam">About opam</a></li><li><a href="#new-workflows-opam-monorepo-enable">New Workflows <code>opam-monorepo</code> Enable</a></li><li><a href="#why-is-opam-monorepo-an-opam-plugin?">Why is <code>opam monorepo</code> an opam Plugin?</a></li></ul></nav><div class="odoc-content"><h3 id="is-this-for-me?"><a href="#is-this-for-me?" class="anchor"></a>Is This For Me?</h3><p>This might be the right thing for you if all your dependencies use Dune and you are under full control of the build and deployment pipeline for your piece of software (e.g., if you are in a position to write a <code>dune-workspace</code> file).</p><p>For example:</p><ul><li>You are building and deploying a piece of software in a Docker image.</li><li>You are building a website using a static-site generator and examples checked with MDX.</li><li>You are checking the impact of some changes in a library and all packages that depend on it.</li></ul><h3 id="about-opam"><a href="#about-opam" class="anchor"></a>About opam</h3><p>Opam is a package manager that</p><ul><li>determines which versions of a library to use for a project</li><li>executes build instructions for each of them so that a compiled form is available</li></ul><p>Instead of the second step, <code>opam-monorepo</code> copies the source code of these dependencies into a Dune workspace, which Dune compiles directly.</p><p>In a way, this is a new kind of package management that uses source code in every step:</p><ul><li>&quot;Binary&quot; package managers (apt, rpm) download the code as binary and install it as binary.</li><li>&quot;Source&quot; package managers download the code as source and install it as binary. Opam is in this category.</li><li><code>opam-monorepo</code> downloads code as source and installs it as source.</li></ul><h3 id="new-workflows-opam-monorepo-enable"><a href="#new-workflows-opam-monorepo-enable" class="anchor"></a>New Workflows <code>opam-monorepo</code> Enable</h3><p>With the sources available, certain tasks are easier:</p><ul><li>Using Merlin to navigate the project (there's no distinction between jumping to a definition in the project’s code or in its dependencies)</li><li>Editing a dependency and rebuilding the project (even in watch mode)</li><li>Upstreaming changes made to dependencies (a dependency is just a subdirectory)</li><li>Cross-compilation - the details of how to build some native code can come late in the pipeline, which isn't a problem if the sources are available</li></ul><h3 id="why-is-opam-monorepo-an-opam-plugin?"><a href="#why-is-opam-monorepo-an-opam-plugin?" class="anchor"></a>Why is <code>opam monorepo</code> an opam Plugin?</h3><p>Even though <code>opam-monorepo</code> doesn't require installing packages through opam, it is distributed as an opam plugin. There are two reasons for this:</p><ul><li>It uses opam libraries internally to interact with the package repository and respect the local opam configuration (repositories, pins, etc.)</li><li>Opam plugins have a special behaviour; they can be installed globally, so one does not have to install <code>opam-monorepo</code> through opam in various projects.</li></ul></div></body></html>